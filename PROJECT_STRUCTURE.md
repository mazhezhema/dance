# ğŸ—ï¸ Danceé¡¹ç›®é‡æ„ç»“æ„è¯´æ˜

## ğŸ“ **æ¸…ç†åçš„é¡¹ç›®ç»“æ„**

```
dance/
â”œâ”€â”€ ğŸ“ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ core/                     # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ task_database.py         # ä»»åŠ¡æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ automation/               # è‡ªåŠ¨åŒ–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ viggle_automation.py     # Viggleè‡ªåŠ¨åŒ–
â”‚   â”‚   â”œâ”€â”€ google_oauth_auth.py     # Google OAuthè®¤è¯
â”‚   â”‚   â”œâ”€â”€ oauth_demo.py           # OAuthæ¼”ç¤º
â”‚   â”‚   â””â”€â”€ oauth_server.py         # OAuthæœåŠ¡å™¨
â”‚   â”œâ”€â”€ ğŸ“ processing/               # è§†é¢‘å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ background_generator.py  # èƒŒæ™¯ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ background_replacement.py # èƒŒæ™¯æ›¿æ¢å™¨
â”‚   â”‚   â””â”€â”€ rtx3060_pipeline.py      # RTX3060 GPU Pipeline
â”‚   â”œâ”€â”€ ğŸ“ utils/                    # å·¥å…·æ¨¡å—
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ ğŸ“ config/                   # é…ç½®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config_example.json
â”‚   â”‚   â”œâ”€â”€ config_multi_account_example.json
â”‚   â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚   â””â”€â”€ requirements_playwright.txt
â”‚   â””â”€â”€ __init__.py                  # ä¸»åŒ…åˆå§‹åŒ–
â”œâ”€â”€ ğŸ“ tests/                        # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ unit/                     # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_background_pipeline.py
â”‚   â”‚   â”œâ”€â”€ test_database.py
â”‚   â”‚   â”œâ”€â”€ test_pw_module.py
â”‚   â”‚   â”œâ”€â”€ test_system.py
â”‚   â”‚   â””â”€â”€ test_cross_platform_paths.py
â”‚   â”œâ”€â”€ ğŸ“ integration/              # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ demo_background_flow.py
â”‚   â”‚   â””â”€â”€ check_viggle_audio.py
â”‚   â”œâ”€â”€ ğŸ“ e2e/                      # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”‚   â””â”€â”€ (å¾…æ·»åŠ )
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ ğŸ“ tools/                        # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ check_environment.py         # ç¯å¢ƒæ£€æŸ¥
â”‚   â”œâ”€â”€ create_backgrounds.py        # èƒŒæ™¯åˆ›å»º
â”‚   â”œâ”€â”€ task_monitor.py              # ä»»åŠ¡ç›‘æ§
â”‚   â”œâ”€â”€ setup_directories.py         # ç›®å½•è®¾ç½®
â”‚   â”œâ”€â”€ setup_playwright.py          # Playwrightè®¾ç½®
â”‚   â””â”€â”€ login_once.py                # ä¸€æ¬¡æ€§ç™»å½•
â”œâ”€â”€ ğŸ“ scripts/                      # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ legacy/                   # æ—§ç‰ˆæœ¬è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ viggle_playwright_optimized.py
â”‚   â”‚   â”œâ”€â”€ viggle_playwright_loguru.py
â”‚   â”‚   â”œâ”€â”€ viggle_playwright_multi_account.py
â”‚   â”‚   â”œâ”€â”€ viggle_auto_processor.py
â”‚   â”‚   â””â”€â”€ loguru_logger_enhanced.py
â”‚   â””â”€â”€ (å…¶ä»–è„šæœ¬)
â”œâ”€â”€ ğŸ“ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ requirements_and_setup_guide.md
â”‚   â”œâ”€â”€ technology_stack.md
â”‚   â”œâ”€â”€ tech_stack_summary.md
â”‚   â””â”€â”€ (å…¶ä»–æ–‡æ¡£)
â”œâ”€â”€ ğŸ“ apps/                         # åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ mobile/                   # ç§»åŠ¨åº”ç”¨
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ ğŸ“ web/                      # Webåº”ç”¨
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ ğŸ“ config/                       # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ backgrounds/                  # èƒŒæ™¯ç´ æ
â”œâ”€â”€ ğŸ“ input/                        # è¾“å…¥ç´ æ
â”‚   â”œâ”€â”€ ğŸ“ people/                   # äººç‰©å›¾ç‰‡
â”‚   â”œâ”€â”€ ğŸ“ music/                    # éŸ³ä¹æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ videos/                   # è§†é¢‘æ–‡ä»¶
â”œâ”€â”€ ğŸ“ tasks_in/                     # è¾“å…¥è§†é¢‘
â”œâ”€â”€ ğŸ“ downloads/                    # Viggleè¾“å‡º
â”œâ”€â”€ ğŸ“ final_output/                 # æœ€ç»ˆè¾“å‡º
â”œâ”€â”€ ğŸ“ temp_backgrounds/             # ä¸´æ—¶èƒŒæ™¯
â”œâ”€â”€ ğŸ“ temp_gpu/                     # GPUä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ ğŸ“ logs/                         # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ ğŸ“ tasks/                        # ä»»åŠ¡æ•°æ®
â”œâ”€â”€ ğŸ“ preprocessing_reports/        # é¢„å¤„ç†æŠ¥å‘Š
â”œâ”€â”€ ğŸ“ quarantine_videos/            # éš”ç¦»è§†é¢‘
â”œâ”€â”€ main.py                          # æ–°ä¸»å…¥å£
â”œâ”€â”€ dance_main.py                    # æ—§ä¸»å…¥å£(ä¿ç•™)
â”œâ”€â”€ setup_viggle.py                  # Viggleè®¾ç½®è„šæœ¬
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ CHECKLIST.md                     # æ£€æŸ¥æ¸…å•
â”œâ”€â”€ README_VIGGLE.md                 # Viggleè¯´æ˜
â”œâ”€â”€ README_MODULES.md                # æ¨¡å—è¯´æ˜
â”œâ”€â”€ QUICK_START.md                   # å¿«é€Ÿå¼€å§‹
â”œâ”€â”€ CROSS_PLATFORM_COMPATIBILITY.md  # è·¨å¹³å°å…¼å®¹æ€§
â””â”€â”€ PROJECT_STRUCTURE.md             # æœ¬æ–‡æ¡£
```

## ğŸ”„ **é‡æ„å˜æ›´è¯´æ˜**

### **1. ä»£ç ç»„ç»‡ä¼˜åŒ–**
- **src/**: æ‰€æœ‰æºä»£ç é›†ä¸­ç®¡ç†
- **core/**: æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
- **automation/**: è‡ªåŠ¨åŒ–ç›¸å…³åŠŸèƒ½
- **processing/**: è§†é¢‘å¤„ç†åŠŸèƒ½
- **utils/**: é€šç”¨å·¥å…·å‡½æ•°
- **config/**: é…ç½®æ–‡ä»¶ç®¡ç†

### **2. æµ‹è¯•ç»“æ„ä¼˜åŒ–**
- **tests/unit/**: å•å…ƒæµ‹è¯•
- **tests/integration/**: é›†æˆæµ‹è¯•
- **tests/e2e/**: ç«¯åˆ°ç«¯æµ‹è¯•

### **3. å·¥å…·è„šæœ¬ä¼˜åŒ–**
- **tools/**: å®ç”¨å·¥å…·è„šæœ¬
- **scripts/legacy/**: æ—§ç‰ˆæœ¬è„šæœ¬ä¿ç•™

### **4. å…¥å£æ–‡ä»¶æ›´æ–°**
- **main.py**: æ–°çš„ä¸»å…¥å£æ–‡ä»¶
- **dance_main.py**: æ—§å…¥å£æ–‡ä»¶ä¿ç•™

### **5. ç›®å½•æ¸…ç†ä¼˜åŒ–**
- **åˆ é™¤é‡å¤æ¨¡å—**: ç§»é™¤æ—§çš„ `modules/` ç›®å½•
- **åˆå¹¶é‡å¤ç›®å½•**: ç»Ÿä¸€è¾“å…¥è¾“å‡ºç›®å½•ç»“æ„
- **åˆ é™¤ç©ºç›®å½•**: æ¸…ç†æ— ç”¨çš„ç©ºç›®å½•
- **ç®€åŒ–åº”ç”¨ç»“æ„**: ä¿ç•™æ ¸å¿ƒçš„ mobile å’Œ web åº”ç”¨

## ğŸš€ **ä½¿ç”¨æ–°ç»“æ„**

### **è¿è¡Œä¸»ç¨‹åº**
```bash
# æ–°æ–¹å¼
python main.py status
python main.py full --test-mode
python main.py background --background dance --effects zoom

# æ—§æ–¹å¼(ä»ç„¶å¯ç”¨)
python dance_main.py status
```

### **è¿è¡Œæµ‹è¯•**
```bash
# å•å…ƒæµ‹è¯•
python -m pytest tests/unit/

# é›†æˆæµ‹è¯•
python tests/integration/demo_background_flow.py
python tests/integration/check_viggle_audio.py

# ç¯å¢ƒæ£€æŸ¥
python tools/check_environment.py
```

### **å¯¼å…¥æ¨¡å—**
```python
# æ–°æ–¹å¼
from src.core import task_database
from src.automation import viggle_automation
from src.processing import background_generator

# æ—§æ–¹å¼(ä»ç„¶å¯ç”¨)
from scripts import task_database
```

## ğŸ“‹ **è¿ç§»æ£€æŸ¥æ¸…å•**

### **å·²å®Œæˆ**
- [x] åˆ›å»ºæ–°çš„ç›®å½•ç»“æ„
- [x] ç§»åŠ¨æ ¸å¿ƒæ¨¡å—åˆ°src/
- [x] ç§»åŠ¨æµ‹è¯•æ–‡ä»¶åˆ°tests/
- [x] ç§»åŠ¨å·¥å…·è„šæœ¬åˆ°tools/
- [x] åˆ›å»ºåŒ…åˆå§‹åŒ–æ–‡ä»¶
- [x] åˆ›å»ºæ–°çš„ä¸»å…¥å£æ–‡ä»¶
- [x] åˆ é™¤é‡å¤çš„æ—§æ¨¡å—
- [x] åˆå¹¶é‡å¤ç›®å½•
- [x] æ¸…ç†ç©ºç›®å½•

### **å¾…å®Œæˆ**
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] ä¿®å¤æ¨¡å—ä¾èµ–
- [ ] æ›´æ–°é…ç½®æ–‡ä»¶è·¯å¾„
- [ ] æµ‹è¯•æ–°ç»“æ„åŠŸèƒ½
- [ ] æ›´æ–°æ–‡æ¡£å¼•ç”¨

## ğŸ’¡ **ä¼˜åŠ¿**

### **1. æ¸…æ™°çš„ç»“æ„**
- æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡ä»£ç 
- ä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- ç¬¦åˆPythoné¡¹ç›®æ ‡å‡†

### **2. æ›´å¥½çš„æµ‹è¯•**
- åˆ†ç¦»å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- ä¾¿äºè‡ªåŠ¨åŒ–æµ‹è¯•
- æé«˜ä»£ç è´¨é‡

### **3. å·¥å…·é›†ä¸­ç®¡ç†**
- å®ç”¨å·¥å…·ç»Ÿä¸€ç®¡ç†
- ä¾¿äºæŸ¥æ‰¾å’Œä½¿ç”¨
- å‡å°‘é‡å¤ä»£ç 

### **4. å‘åå…¼å®¹**
- ä¿ç•™æ—§å…¥å£æ–‡ä»¶
- æ¸è¿›å¼è¿ç§»
- é™ä½è¿ç§»é£é™©

### **5. ç›®å½•ç²¾ç®€**
- åˆ é™¤é‡å¤å’Œç©ºç›®å½•
- å‡å°‘é¡¹ç›®å¤æ‚åº¦
- æé«˜ç»´æŠ¤æ•ˆç‡

## ğŸ”§ **ä¸‹ä¸€æ­¥**

1. **ä¿®å¤å¯¼å…¥è·¯å¾„**: æ›´æ–°æ‰€æœ‰æ¨¡å—çš„å¯¼å…¥è¯­å¥
2. **æµ‹è¯•åŠŸèƒ½**: éªŒè¯æ–°ç»“æ„ä¸‹çš„åŠŸèƒ½æ­£å¸¸
3. **æ›´æ–°æ–‡æ¡£**: æ›´æ–°æ‰€æœ‰æ–‡æ¡£ä¸­çš„è·¯å¾„å¼•ç”¨
4. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–æ¨¡å—åŠ è½½å’Œä¾èµ–ç®¡ç†
5. **CI/CDé›†æˆ**: æ›´æ–°æŒç»­é›†æˆé…ç½®

è¿™ä¸ªé‡æ„ä½¿é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°å’Œä¸“ä¸šï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œé•¿æœŸç»´æŠ¤ï¼ğŸ‰
