# ğŸ­ Viggle Playwright è‡ªåŠ¨åŒ–ç³»ç»Ÿ

> åŸºäº engineering-memory æœ€ä½³å®è·µçš„ä¸“ä¸šçº§ Viggle è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ

## ğŸ¯ ç³»ç»Ÿç‰¹è‰²

### ğŸ§  Engineering-Memory æ¶æ„
- **ç»“æ„åŒ–é—®é¢˜åˆ†æ**: èƒŒæ™¯ â†’ é—®é¢˜ â†’ è§£å†³æ–¹æ¡ˆ â†’ éªŒè¯
- **æ¨¡å—åŒ–è®¾è®¡**: ä¼šè¯ç®¡ç† + è¡Œä¸ºæ¨¡æ‹Ÿ + ä»»åŠ¡é˜Ÿåˆ— + é”™è¯¯å¤„ç†
- **å¯è§‚æµ‹æ€§**: ç»“æ„åŒ–æ—¥å¿— + é”™è¯¯è¿½è¸ª + æ€§èƒ½ç›‘æ§
- **æ•…éšœæ¢å¤**: æ–­ç‚¹ç»­ä¼  + è‡ªåŠ¨é‡è¯• + çŠ¶æ€æŒä¹…åŒ–

### ğŸ›¡ï¸ åæ£€æµ‹æŠ€æœ¯
- **æµè§ˆå™¨æŒ‡çº¹éšæœºåŒ–**: User-Agent + è§†çª— + æ’ä»¶ä¼ªé€ 
- **äººç±»è¡Œä¸ºæ¨¡æ‹Ÿ**: éšæœºå»¶è¿Ÿ + é¼ æ ‡è½¨è¿¹ + æ‰“å­—æ¨¡å¼
- **ä¼šè¯æŒä¹…åŒ–**: Cookieç®¡ç† + çŠ¶æ€ä¿å­˜ + è‡ªåŠ¨æ¢å¤
- **æ™ºèƒ½é¢‘æ§**: åŠ¨æ€é—´éš” + è´¦å·è½®æ¢ + é«˜å³°é¿è®©

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **å¹¶è¡Œå¤„ç†**: å¤šè´¦å·åŒæ—¶å·¥ä½œ
- **æ™ºèƒ½è°ƒåº¦**: è´Ÿè½½å‡è¡¡ + å¤±è´¥é‡è¯•
- **èµ„æºç®¡ç†**: å†…å­˜æ§åˆ¶ + ä¼šè¯å¤ç”¨
- **æ–­ç‚¹ç»­ä¼ **: ä»»åŠ¡çŠ¶æ€æŒä¹…åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ ç¯å¢ƒæ£€æŸ¥
```bash
# è¿è¡Œç¯å¢ƒæµ‹è¯•
python test_viggle.py
```

### 2ï¸âƒ£ åˆå§‹åŒ–è®¾ç½®
```bash
# è¿è¡Œè®¾ç½®å‘å¯¼
python setup_viggle.py
```

### 3ï¸âƒ£ å‡†å¤‡ç´ æ
```bash
# ç›®å½•ç»“æ„
input/
â”œâ”€â”€ videos/     # æ”¾ç½®åŸå§‹è§†é¢‘ (.mp4, .avi, .mov)
â””â”€â”€ people/     # æ”¾ç½®AIäººåƒ (.jpg, .png)
```

### 4ï¸âƒ£ å¼€å§‹å¤„ç†
```bash
# è¿è¡Œè‡ªåŠ¨åŒ–å¤„ç†
python scripts/viggle_playwright_enhanced.py
```

## ğŸ“ é¡¹ç›®æ¶æ„

```
dance/
â”œâ”€â”€ ğŸ“Š æ ¸å¿ƒæ–‡ä»¶
â”‚   â”œâ”€â”€ config.json                           # ä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ setup_viggle.py                       # è®¾ç½®å‘å¯¼
â”‚   â”œâ”€â”€ test_viggle.py                        # ç¯å¢ƒæµ‹è¯•
â”‚   â””â”€â”€ README_VIGGLE.md                      # ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ ğŸ“ è¾“å…¥è¾“å‡º
â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”œâ”€â”€ videos/                          # åŸå§‹è§†é¢‘
â”‚   â”‚   â””â”€â”€ people/                          # AIäººåƒ
â”‚   â””â”€â”€ output/                              # å¤„ç†ç»“æœ
â”œâ”€â”€ ğŸ­ æ ¸å¿ƒè„šæœ¬
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ viggle_playwright_enhanced.py     # ä¸»å¤„ç†ç¨‹åº
â”œâ”€â”€ ğŸ’¾ è¿è¡Œæ—¶æ•°æ®
â”‚   â”œâ”€â”€ profiles/                            # æµè§ˆå™¨é…ç½®
â”‚   â”œâ”€â”€ logs/                               # æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ temp/                               # ä¸´æ—¶æ–‡ä»¶
â””â”€â”€ ğŸ“š æ–‡æ¡£
    â””â”€â”€ docs/
        â””â”€â”€ engineering-best-practices.md    # å·¥ç¨‹æœ€ä½³å®è·µ
```

## âš™ï¸ é…ç½®è¯´æ˜

### è´¦å·é…ç½® (config.json)
```json
{
  "accounts": [
    {
      "email": "your_email@example.com",
      "password": "your_password",
      "daily_limit": 30,
      "profile_dir": "./profiles/main_account"
    }
  ],
  "processing": {
    "max_retries": 3,
    "timeout_minutes": 15,
    "parallel_accounts": 2
  }
}
```

### åæ£€æµ‹é…ç½®
```json
{
  "anti_detection": {
    "random_delays": true,
    "human_behavior": true,
    "session_persistence": true
  }
}
```

## ğŸ›ï¸ é«˜çº§åŠŸèƒ½

### ğŸ“Š ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
```python
# ä»»åŠ¡çŠ¶æ€è¿½è¸ª
- pending: ç­‰å¾…å¤„ç†
- processing: æ­£åœ¨å¤„ç†  
- completed: å¤„ç†å®Œæˆ
- failed: å¤„ç†å¤±è´¥

# æ”¯æŒæ–­ç‚¹ç»­ä¼ 
- ç¨‹åºä¸­æ–­åå¯æ¢å¤
- å¤±è´¥ä»»åŠ¡è‡ªåŠ¨é‡è¯•
- çŠ¶æ€æŒä¹…åŒ–ä¿å­˜
```

### ğŸ” å®æ—¶ç›‘æ§
```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f logs/viggle_YYYYMMDD.log

# æ£€æŸ¥ä»»åŠ¡çŠ¶æ€
python -c "
from scripts.viggle_playwright_enhanced import TaskQueue
queue = TaskQueue()
print(f'å¾…å¤„ç†: {len(queue.get_pending_tasks())}')
print(f'å¤±è´¥é‡è¯•: {len(queue.get_failed_tasks())}')
"
```

### ğŸ› ï¸ æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜
1. **ç™»å½•å¤±è´¥**
   ```bash
   # æ£€æŸ¥è´¦å·é…ç½®
   python test_viggle.py
   
   # æ¸…é™¤ä¼šè¯çŠ¶æ€
   rm -rf profiles/*/storage_state.json
   ```

2. **ä¸Šä¼ å¤±è´¥**
   ```bash
   # æ£€æŸ¥è§†é¢‘æ ¼å¼
   æ”¯æŒ: .mp4, .avi, .mov, .mkv
   å¤§å°: < 100MB
   æ—¶é•¿: < 10åˆ†é’Ÿ
   ```

3. **ç”Ÿæˆè¶…æ—¶**
   ```bash
   # è°ƒæ•´è¶…æ—¶è®¾ç½®
   vim config.json
   # å¢åŠ  timeout_minutes
   ```

4. **åæ£€æµ‹è§¦å‘**
   ```bash
   # é™ä½å¹¶å‘
   "parallel_accounts": 1
   
   # å¢åŠ å»¶è¿Ÿ
   "task_interval_seconds": [120, 300]
   ```

## ğŸ“ˆ æ€§èƒ½è°ƒä¼˜

### ğŸ¯ æœ€ä½³å®è·µ
```json
{
  "æ¨èé…ç½®": {
    "single_account": {
      "daily_limit": 30,
      "parallel_tasks": 1,
      "interval_seconds": [60, 120]
    },
    "multi_account": {
      "max_accounts": 3,
      "per_account_limit": 20,
      "stagger_start": true
    }
  }
}
```

### â° å¤„ç†æ—¶é—´ä¼°ç®—
```
å•ä¸ª5åˆ†é’Ÿè§†é¢‘:
- ä¸Šä¼ æ—¶é—´: 1-2åˆ†é’Ÿ
- ç”Ÿæˆæ—¶é—´: 3-8åˆ†é’Ÿ  
- ä¸‹è½½æ—¶é—´: 30ç§’-1åˆ†é’Ÿ
- æ€»è®¡: 5-12åˆ†é’Ÿ

æ‰¹é‡å¤„ç†:
- 500ä¸ªè§†é¢‘ â‰ˆ 2-3å¤© (3è´¦å·å¹¶è¡Œ)
- å»ºè®®åˆ†æ‰¹å¤„ç†: 50ä¸ª/æ‰¹æ¬¡
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

### è´¦å·å®‰å…¨
- âœ… ä½¿ç”¨ä¸“é—¨çš„æµ‹è¯•è´¦å·
- âœ… å¯ç”¨äºŒæ­¥éªŒè¯
- âœ… å®šæœŸæ›´æ¢å¯†ç 
- âœ… ç›‘æ§è´¦å·çŠ¶æ€

### æ•°æ®å®‰å…¨  
- âœ… æœ¬åœ°å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… åŠ å¯†é…ç½®æ–‡ä»¶
- âœ… å®šæœŸå¤‡ä»½æ•°æ®
- âœ… æ¸…ç†ä¸´æ—¶æ–‡ä»¶

## ğŸš¨ é£é™©ç®¡ç†

### é™åˆ¶ç­–ç•¥
```json
{
  "daily_limits": {
    "per_account": 30,
    "total_across_accounts": 80
  },
  "rate_limits": {
    "min_interval_seconds": 60,
    "max_concurrent_tasks": 3,
    "peak_hour_avoidance": [9,10,11,14,15,16,20,21,22]
  }
}
```

### åº”æ€¥å¤„ç†
1. **æ£€æµ‹åˆ°é£é™©**: è‡ªåŠ¨æš‚åœå¤„ç†
2. **è´¦å·å¼‚å¸¸**: åˆ‡æ¢å¤‡ç”¨è´¦å·  
3. **ç³»ç»Ÿè¿‡è½½**: é™ä½å¹¶å‘æ•°
4. **ç½‘ç»œå¼‚å¸¸**: è‡ªåŠ¨é‡è¯•æœºåˆ¶

## ğŸ“š å­¦ä¹ èµ„æº

### Engineering-Memory å‚è€ƒ
- [è½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µ](docs/engineering-best-practices.md)
- [åæ£€æµ‹æŠ€æœ¯æŒ‡å—](docs/playwright-anti-detection-best-practices.md)
- [ä»»åŠ¡é˜Ÿåˆ—è®¾è®¡æ¨¡å¼](docs/detailed-workflow-best-practices.md)

### æŠ€æœ¯æ–‡æ¡£
- [Playwright å®˜æ–¹æ–‡æ¡£](https://playwright.dev/)
- [åæ£€æµ‹æŠ€æœ¯ç ”ç©¶](docs/viggle-anti-detection-guide.md)
- [é”™è¯¯å¤„ç†æœ€ä½³å®è·µ](docs/engineering-best-practices.md#é”™è¯¯åˆ†ææ¡†æ¶)

## ğŸ¤ è´¡çŒ®æŒ‡å—

åŸºäº engineering-memory çš„è´¡çŒ®æµç¨‹:
1. **é—®é¢˜å®šä¹‰**: å…·ä½“æè¿°è¦è§£å†³çš„é—®é¢˜
2. **èƒŒæ™¯è°ƒç ”**: åˆ†æé—®é¢˜äº§ç”Ÿçš„åŸå› 
3. **æ–¹æ¡ˆè®¾è®¡**: æå‡ºè§£å†³æ–¹æ¡ˆå’Œå®ç°æ€è·¯
4. **å®ç°éªŒè¯**: ç¼–å†™ä»£ç å¹¶å……åˆ†æµ‹è¯•
5. **ç»éªŒæ€»ç»“**: æ–‡æ¡£åŒ–ç»éªŒå’Œé¿å‘æŒ‡å—

## ğŸ“„ è®¸å¯è¯

MIT License - åŸºäº engineering-memory å¼€æºç²¾ç¥

---

**ğŸ’¡ æç¤º**: ä½¿ç”¨å‰è¯·ä»”ç»†é˜…è¯» Viggle çš„æœåŠ¡æ¡æ¬¾ï¼Œç¡®ä¿åˆè§„ä½¿ç”¨ã€‚

**ğŸ†˜ æ”¯æŒ**: é‡åˆ°é—®é¢˜è¯·æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æˆ–è¿è¡Œæµ‹è¯•è„šæœ¬è¯Šæ–­ã€‚
